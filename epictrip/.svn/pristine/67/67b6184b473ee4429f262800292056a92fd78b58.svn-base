insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('무로란', 42.3151792, 140.9737666, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('지큐미사키', 42.3027107, 141.0008274, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하코다테야마', 41.7445775, 140.7056028, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('고료카쿠', 41.7969245, 140.7567838, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('마츠마에', 41.5041304, 140.1734928, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('에사시', 41.84008, 140.1281, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오누마', 41.9987492, 140.6903742, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('고마가다케', 42.063333, 140.677222, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('쿠시로(습지)', 42.9849413, 144.381804, '일본','pl'||playsInfo_se.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아캉호수', 43.4572585, 144.1040147, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('미호로', 36.6714657, 127.4224247, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('토와다호수', 40.6186927, 141.146339, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오이라세계곡', 40.6864706, 139.9701849, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하치노헤(타네사시해안)', 19.2183307, 72.9780897, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('시모키타 반도', 41.4360723, 141.1024054, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('시모후로온천', 41.4669139, 141.0928587, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하치만타이', 40.0670801, 140.7827828, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하나마키온천', 32.2423335, 130.7260843, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('시도타이라온천', 39.4198519, 141.0231145, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('미야기자오', 38.7094478, 141.4925426, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아사히카와온천', 43.7708833, 142.3650083, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오니카와온천', 26.1201911, 127.7025012, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오타루 사와아카기 온천', 43.1902372, 140.994172, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오미카지리', 36.5128356, 140.6194923, '일본','pl'||playsInfo_seq.nextval);

insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오타루 쇼워스', 43.1902372, 140.994172, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('에코밸리 미야쿠', 37.5452683, 126.9224223, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오타루 아사리', 43.1751528, 141.0703878, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오기니마치', 33.1215572, 131.0681257, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('도쿄디즈니랜드', 35.6328964, 139.8803943, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('에노시마', 35.2990992, 139.4809269, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('후지산', 35.3606255, 138.7273634, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아타미 온천', 35.0963896, 139.071784, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('카와구치와 캔포우', 35.8077356, 139.7241874, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('요코하마 차이나타운', 35.4434459, 139.6460909, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('요코하마 모토마치', 35.4398189, 139.6499917, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('나가사키', 33.2488525, 129.6930912, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('호쿠라온천', 34.7355226, 135.2780417, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('나고야', 35.1814506, 136.9065571, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('쿠마모토산', 32.8594427, 130.7969149, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('쿠마모토 온천', 32.8032164, 130.7079369, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('벳부갓아래 온천', 33.2844614, 131.4907093, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오이소', 35.311435, 139.313291, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하코네유모토온천', 35.2333827, 139.1039163, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아시노코호수', 35.2095674, 139.0034626, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('센고쿠하라온천', 35.2607723, 139.0110305, '일본','pl'||playsInfo_seq.nextval);

SELECT * from plaInfo;


SELECT * FROM USERINFO u ;


SELECT userid,name,auth FROM USERINFO WHERE userid = 'heoyoun38' ;


SELECT * FROM userInfo;

ALTER TABLE userInfo
ADD introTxt VARCHAR2(600);

CREATE SEQUENCE Schedule_seq
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
SELECT * FROM schedule;
DELETE FROM SCHEDULE s WHERE skey = 'shl2';
INSERT INTO schedule values('shl_'||Schedule_seq.nextval,'heoyoun38',sysdate,'일본','2023-08-10','2023-08-14',0);
INSERT INTO schedule values('shl_'||Schedule_seq.nextval,'dudwo123',sysdate,'일본','2023-08-10','2023-08-14',0);



CREATE SEQUENCE Detail_seq
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;

drop TABLE Detail;
CREATE TABLE Detailschedule (
   	dskey   VARCHAR(255)   NOT NULL,
   	skey   VARCHAR(255)   NOT NULL,
   	placename VARCHAR(255)   NULL,
   	lat VARCHAR(255)   NULL,
   	lng VARCHAR(255)   NULL,
   	topnum  VARCHAR(255) null,
   	value   VARCHAR(255)   NULL,
   	dayInfo   Date   NULL
);


SELECT * FROM Schedule;

CREATE TABLE Detail_shl (
   	Dtlkey   VARCHAR(255)   NOT NULL,
   	skey   VARCHAR(255)   NOT NULL,
   	val VARCHAR(255),
   	dayDate  date   NULL,
   	placeInfo VARCHAR(255)
);
SELECT * FROM Detail_shl;

DROP TABLE detail_shl;
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'shl_3',null,'2023-08-10',null);
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'1','shl_3','2023-08-10','pl10');
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'2','shl_3','2023-08-11','pl14');
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'shl_4',null,'2023-08-10',null);
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'1','shl_4','2023-08-10','pl10');
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'2','shl_4','2023-08-11','pl14');


SELECT d.*, LEVEL 
FROM Detail_shl d
START WITH val IS NULL
CONNECT BY PRIOR skey = val
ORDER BY dtlkey;

SELECT *
FROM (
	SELECT d.*, LEVEL 
	FROM Detail_shl d
	START WITH val IS NULL
	CONNECT BY PRIOR skey = val
	ORDER BY dtlkey
)
WHERE skey = 'shl_3' or val = 'shl_3';



INSERT INTO Detailschedule values('de'||Detail_seq.nextval, NULL ,'2023-08-10','sc1',null);
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl10','2023-08-10','1','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl14','2023-08-10','2','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl5','2023-08-10','3','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,NULL,'2023-08-11','sc1',null);
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl36','2023-08-11','1','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl34','2023-08-11','2','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl24','2023-08-11','3','sc1');

INSERT INTO Detailschedule values('de'||Detail_seq.nextval,NULL,'sc1','a1',NULL,'2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl10','sc1','1','a1','2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl36','sc1','2','a1','2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl34','sc1','3','a1','2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,NULL,'sc1','a1',NULL,'2023-08-12');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl10','sc1','1','a1','2023-08-12');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl36','sc1','2','a1','2023-08-12');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl34','sc1','3','a1','2023-08-12');

SELECT LEVEL, d.*
FROM Detailschedule d
START WITH value IS NULL 
CONNECT BY PRIOR topnum = value;
ORDER BY dayInfo;

SELECT
    CONNECT_BY_ROOT dskey AS root_dskey,
    LPAD(' ', LEVEL - 1) || dskey AS indented_dskey,
    plaeckey,
    skey,
    topnum,
    value
FROM
    Detailschedule
CONNECT BY
    PRIOR dskey = plaeckey
START WITH
    plaeckey IS NULL;


SELECT * FROM Detailschedule;

CREATE TABLE plaecInfo (
	plaec VARCHAR(255),
	lat VARCHAR(255),
	lng VARCHAR(255),
	loc VARCHAR(255),
	plaeckey VARCHAR2(255)
);










CREATE SEQUENCE sp_seq
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;




SELECT * FROM placeInfo;


CREATE TABLE schedule_place (
	schedule_place_key VARCHAR(255),
	schedule_key VARCHAR(255),
	place_key VARCHAR(255),
	day_num number,
	FOREIGN KEY (place_key) REFERENCES placeInfo(PLACE_KEY),
    FOREIGN KEY (Schedule_KEY) REFERENCES schedulePost("Schedule_KEY")
);

ALTER TABLE placeInfo  ADD primary KEY (place_key);
ALTER TABLE SCHEDULEPOST ADD primary KEY ("Schedule_KEY");


INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl7',1);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl11',1);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl15',2);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl32',2);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl49',3);



   


SELECT * FROM userinfo;
SELECT * FROM Schedule ;
SELECT * FROM schedule_place;
SELECT * FROM place;

UPDATE Schedule 
	SET ENDDATE = '2023-08-12'
WHERE USERid = 'heoyoun38';

SELECT p.schedule_key ,u.name , p.userid,p.loc,
TO_CHAR(p.startdate,'yyyy-mm-dd') AS startdate,TO_CHAR(p.enddate,'yyyy-mm-dd') AS enddate,p.hits 
FROM Schedule p 
JOIN userinfo u ON u.USERid = p.USERid
WHERE p.schedule_key = 'shl_3';

-- 게시물 상세 mapper
SELECT
    p.schedule_key,
    u.name,
    TO_CHAR(p.startdate+pp.day_num-1,'yyyy-mm-dd') AS daydate,
    pp.day_num,
    pl.name AS place_name,
    pl.lat,
    pl.lng,
    pl.loc,
    pp.Schedule_Place_key,
FROM
    Schedule p
JOIN
    UserInfo u ON p.userid = u.userid
JOIN
    Schedule_Place pp ON p.schedule_key = pp.schedule_key
JOIN
    Place pl ON pp.place_key = pl.place_key
WHERE
    p.schedule_key like 'shl_3'
ORDER BY
	day_num;

UPDATE Schedule 
SET hits = hits + 1
WHERE SCHEDULE_KEY = 'shl_3';

SELECT * FROM Schedule ;
INSERT INTO schedule values('shl_'||Schedule_seq.nextval,'dudwo123',sysdate,'일본','2023-08-10','2023-08-14',0);
-- INSERT INTO schedule values('shl_'||Schedule_seq.nextval,#{userid},sysdate,#{loc},#{startdate},#{enddate},0); 

SELECT * FROM schedule_place;
DELETE Schedule WHERE SCHEDULE_KEY='shl_8';
INSERT INTO schedule_place values('shl_11','pl49',3,sp_seq.nextval);
-- INSERT INTO schedule_place values(#{schedule_key},#{place_key},#{daynum},sp_seq.nextval);



SELECT * FROM Schedule_Place;

ALTER TABLE Schedule_Place
DROP COLUMN Schedule_Place_key;

ALTER TABLE Schedule_Place
ADD (Schedule_Place_key number);

CREATE TABLE Schedule (
   schedule_key   VARCHAR(255)   NOT NULL,
   userid   VARCHAR(255)   NOT NULL,
   creatdate  date   NULL,
   loc   VARCHAR(255)   NULL,
   startdate  date   NULL,
   enddate  date   NULL,
   hits   number   NULL
);

/*
		서울 : 37.5518911		126.9917937
	    일본 : 36.204824		138.252924
	    중국 : 35.86166		104.195397
	    홍콩 : 104.195397		114.1693611
	    배트남 : 14.058324	108.277199 

*/
DELETE FROM place WHERE place_key = 'pl52';


SELECT * FROM place WHERE loc = '일본' and name LIKE '%'||'무로란'||'%';
SELECT * FROM place WHERE name = '일본';

INSERT INTO place VALUES ('서울','37.5518911','126.9917937','서울','pl'||playsInfo_seq.nextval);
INSERT INTO place VALUES ('일본','36.204824','138.252924','일본','pl'||playsInfo_seq.nextval);
INSERT INTO place VALUES ('중국','35.86166','104.195397','중국','pl'||playsInfo_seq.nextval);
INSERT INTO place VALUES ('홍콩','104.195397','114.1693611','홍콩','pl'||playsInfo_seq.nextval);
INSERT INTO place VALUES ('마카오','22.198745','113.543873','마카오','pl'||playsInfo_seq.nextval);
INSERT INTO place VALUES ('대만','23.69781','120.960515','대만','pl'||playsInfo_seq.nextval);
INSERT INTO place VALUES ('몽골','46.862496','103.846656','몽골','pl'||playsInfo_seq.nextval);


-- 일정 메인
SELECT
    p.schedule_key,
    u.name,
    p.STARTDATE ,
    p.endDATE ,
    p.creatdate,
    p.loc,
    p.hits,
    pp.day_num,
    pl.name AS place_name,
    pl.lat,
    pl.lng
FROM
    Schedule p
JOIN
    UserInfo u ON p.userid = u.userid
JOIN
    Schedule_Place pp ON p.schedule_key = pp.schedule_key
JOIN
    Place pl ON pp.place_key = pl.place_key
WHERE
    p.loc like '%'||'일본'||'%'
ORDER BY
	p.CREATDATE DESC;

-- [{포스트키, 이름 , 시작날짜, 마지막날짜, 나라, 히트수, {daynum = 1,{지역이름, 위도, 경도}}},
-- {포스트키, 이름 , 시작날짜, 마지막날짜, 나라, 히트수, {daynum = 1,{지역이름, 위도, 경도}}}]



	
-- 상품
CREATE TABLE product (
	prodkey	VARCHAR(255) NOT NULL PRIMARY KEY,
	prodloc	VARCHAR(255) NULL,
	dcday	VARCHAR(255) NULL,
	dcprice	number NULL,
	price NUMBER NULL,
	prodtitle VARCHAR(255) NULL,
	prodcontent	VARCHAR(3000) NULL,
	titleimage VARCHAR(255) NULL,
	detailimage VARCHAR(255) NULL,
	hits NUMBER NULL,
	startdate DATE NULL, -- 상품판매 시작
	enddate	DATE NULL, -- 상품판매 마지막
	updtdate	DATE NULL, -- 업데이트
	creatdate DATE NULL -- 게시날짜
);
-- 프로덕트 시퀀스
CREATE SEQUENCE prod_seq
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

SELECT * FROM product;
DELETE FROM product WHERE prodkey = 'prod_5';

-- 인서트문
INSERT INTO product (prodkey, prodloc, dcday, dcprice, price, prodtitle, prodcontent, titleimage, 
					detailimage, hits, startdate, enddate, updtdate, creatdate)
VALUES ('prod_'||prod_seq.nextval, '서울', '월,화,', 10, 60000, '테스트느트느', '이 상품은 매우 좋은 상품입니다.', 'prod_img1.jpg', 
					'prod_dtl_img1.jpg', 0, '2023-08-19', '2023-08-31', sysdate, sysdate);
UPDATE PRODUCT set hits = 1 WHERE PRODKEY = 'prod_9';
-- 메인 출력
SELECT prodkey, prodloc, price, prodtitle, titleimage, hits, updtdate   FROM product ;

SELECT prodkey, prodloc, price, prodtitle, titleimage, hits, updtdate   FROM product WHERE country = '일본' ORDER BY UPDTDATE DESC; -- 최신순
SELECT prodkey, prodloc, price, prodtitle, titleimage, hits, updtdate   FROM product ORDER BY hits desc; -- 조회순
SELECT prodkey, prodloc, price, prodtitle, titleimage, hits, updtdate   FROM product ORDER BY UPDTDATE DESC;

ALTER TABLE product
ADD country VARCHAR2(200);

UPDATE product SET country = '일본' WHERE 1=1;

ALTER TABLE product
DROP COLUMN PRODUSER;

SELECT *
FROM (
    SELECT prodkey, prodloc,country, price, prodtitle, titleimage, hits, updtdate,
           ROW_NUMBER() OVER (ORDER BY UPDTDATE DESC) AS rownumber
    FROM product
    WHERE country = '일본'
) result
WHERE rownumber >= 13
AND rownumber <= 24;

-- 처음 페이지=0 +1: 1+1 13/24>> 2+1을 눌럿을때 +12를 더해줌 25/36
-- 4+1를 눌럿어 48/ 

SELECT
    prodkey, prodloc, country, price, prodtitle, titleimage, hits, updtdate
FROM (
    SELECT
        prodkey, prodloc, country, price, prodtitle, titleimage, hits, updtdate,
        ROW_NUMBER() OVER (ORDER BY updtdate DESC) AS rownumnum
    FROM
        product
    WHERE
        country = '일본'
)
WHERE rownum >= 1
  AND rownum <= 12;

select count(*)
from product
where 1=1;

select *
from product
where 1=1;
SELECT * FROM product;

select *
		from(
		    select rownum as rnum, 
			prodkey, prodloc, country, price, prodtitle, titleimage, hits, updtdate
		    from
		    (
		        select *
		        from product
		        where 1=1
		        AND prodtitle LIKE '%'||'좋'||'%'
	    ) t
	    where rownum <= 12
	)
where rnum >= 1


SELECT prodkey, prodloc ,dcday ,dcprice ,price , prodtitle , prodcontent ,titleimage ,detailimage , hits , startdate , enddate , updtdate , writer , country 
FROM product WHERE prodkey = 'prod_9';







SELECT
    COUNT(*)
FROM
    product
WHERE
    country = '일본';



CREATE TABLE Payment (
	paykey	VARCHAR(255)	NOT NULL,
	userid	VARCHAR(255)	NOT NULL,
	prodkey	VARCHAR(255)	NOT NULL,
	savedmoney	number	NULL,
	paydate	date	NULL,
	paystatus	VARCHAR(255)	NULL,
	PRIMARY KEY (paykey, userid, prodkey),
	FOREIGN KEY (userid) REFERENCES userinfo (userid),
	FOREIGN KEY (prodkey) REFERENCES product (prodkey)
);











CREATE TABLE Prodcomment (
	commentkey	VARCHAR(255)	NOT NULL,
	prodkey	VARCHAR(255)	NOT NULL,
	userid	VARCHAR(255)	NOT NULL,
	comments	VARCHAR(255)	NULL,
	uploaddate	date	NULL,
	updatedate	date	NULL,
	PRIMARY KEY (commentkey, prodkey),
	FOREIGN KEY (prodkey) REFERENCES product (prodkey),
	FOREIGN KEY (userid) REFERENCES userinfo (userid)
);

DROP TABLE Prodcomment;

SELECT pc.commentkey, pc.prodkey, pc.userid, pc.comments, pc.updatedate, u.name, u.auth, u.image
FROM Prodcomment pc
JOIN Userinfo u ON pc.userid = u.userid
WHERE pc.prodkey = 'prod_106';

select count(*)
FROM Prodcomment pc
JOIN Userinfo u ON pc.userid = u.userid
where 1=1
and pc.prodkey = 'prod_106';

ALTER TABLE Prodcomment
MODIFY comments VARCHAR(600);
SELECT * FROM Prodcomment;

UPDATE product SET DCDAY = '월 화 수 ' WHERE 1=1;
SELECT * from product;
SELECT pc.commentkey, pc.prodkey, pc.userid, pc.comments, pc.updatedate, u.name, u.auth, u.image
        FROM Prodcomment pc
        JOIN Userinfo u ON pc.userid = u.userid
        where 1=1
        and pc.prodkey = 'prod_106';


SELECT *
FROM (
    SELECT rownum as rnum, 
           commentkey, prodkey, userid, comments, updatedate, name, auth, image
    FROM (
        SELECT pc.commentkey, pc.prodkey, pc.userid, pc.comments, pc.updatedate, u.name, u.auth, u.image
        FROM Prodcomment pc
        JOIN Userinfo u ON pc.userid = u.userid
        where 1=1
        and pc.prodkey = #{prodkey}
    ) t
    where rownum <![CDATA[<=]]> #{startList} + #{sizePerPage}
)
WHERE rnum <![CDATA[>=]]> #{startList};



select *
		from(
		    select rownum as rnum, 
			prodkey, prodloc, country, price, prodtitle, titleimage, hits, updtdate
		    from
		    (
		        select *
		        from product
		        where 1=1
		        and country = #{country}
			    ) t
			    where rownum <![CDATA[<=]]> #{startList} + #{sizePerPage}
			)
where rnum <![CDATA[>=]]> #{startList}





CREATE SEQUENCE pct_seq
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

SELECT * FROM Prodcomment;

INSERT INTO Prodcomment (commentkey,prodkey,userid,comments,uploaddate,updatedate)
values('pct_'||pct_seq.nextval,'prod_106','dudwo123','잘보고 갑니다123.',sysdate,sysdate); 
INSERT INTO Prodcomment values('pct_'||pct_seq.nextval,'prod_106','heoyoun38','잘보고 갑니다2.',sysdate,sysdate); 

















































































































































































































































































































