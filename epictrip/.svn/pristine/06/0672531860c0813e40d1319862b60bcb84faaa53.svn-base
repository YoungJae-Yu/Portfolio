<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >	
<mapper namespace="com.web.epictrip.dao.Company_dao">
	<!-- 동행 리스트 -->
    <select id="cpList" resultType="company">
        SELECT * FROM COMPANY c, USERINFO u 
        WHERE c.USERID = u.USERID 
        AND CPTITLE LIKE '%' || #{cptitle} || '%'
        <choose>
            <!-- Add a condition to decide which ORDER BY to use. For example, based on a parameter 'orderType'. -->
			<when test="orderType == 'hits'">
			    ORDER BY 
			    CASE WHEN c.enddate &lt; SYSDATE THEN 1 ELSE 0 END,
			    c.hits DESC,
			    c.creatdate DESC
			</when>
            <otherwise>
                ORDER BY 
                CASE WHEN c.enddate &lt; SYSDATE THEN 1 ELSE 0 END,
                c.creatdate DESC
            </otherwise>
        </choose>
    </select>
</mapper>



	