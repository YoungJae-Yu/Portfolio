package com.web.epictrip.service;


import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.bind.annotation.RequestParam;

import com.web.epictrip.dao.Schedule_dao;
import com.web.epictrip.vo.Schedule_Place_dt;
import com.web.epictrip.vo.Schedule_Place_select;
import com.web.epictrip.vo.Schedule_select;

@Service
public class Schedule_service {

	@Autowired
	private Schedule_dao dao;
	
	 public List<Schedule_Place_select> schedule_Dt(String schedule_key) {
	        List<Schedule_Place_dt> dataList = dao.schedule_Dt(schedule_key);
	        Map<Integer, List<Schedule_Place_dt>> groupedData = new HashMap<>();

	        for (Schedule_Place_dt item : dataList) {
	            int dayNum = item.getDay_num();
	            if (!groupedData.containsKey(dayNum)) {
	                groupedData.put(dayNum, new ArrayList<>());
	            }
	            groupedData.get(dayNum).add(item);
	        }

	        List<Schedule_Place_select> result = new ArrayList<>();
	        for (Map.Entry<Integer, List<Schedule_Place_dt>> entry : groupedData.entrySet()) {
	            int dayNum = entry.getKey();
	            List<Schedule_Place_dt> dayData = entry.getValue();
	            result.add(new Schedule_Place_select(dayNum, dayData));
	        }

	        return result;
	    }
	 
	 public Schedule_select schedule_Dt02(@RequestParam("schedule_key") String schedule_key) {
		 
		 return dao.schedule_Dt02(schedule_key);
	 }
		
	 
	 
	 
}
