<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >	
<mapper namespace="com.web.epictrip.dao.Schedule_dao">

	<!-- 상세화면 -->
	<select id="schedule_Dt" resultType="scheduledt" parameterType="string">
		SELECT
		    p.schedule_key,
		    u.name,
		    TO_CHAR(p.startdate+pp.day_num-1,'yyyy-mm-dd') AS daydate,
		    pp.day_num,
		    pl.name AS place_name,
		    pl.lat,
		    pl.lng,
		    pl.loc,
		    pp.Schedule_Place_key
		FROM
		    Schedule p
		JOIN
		    UserInfo u ON p.userid = u.userid
		JOIN
		    Schedule_Place pp ON p.schedule_key = pp.schedule_key
		JOIN
		    Place pl ON pp.place_key = pl.place_key
		WHERE
		    p.schedule_key = #{schedule_key}
		ORDER BY
			day_num
	</select>
	<select id="schedule_Dt02" resultType="Schedulesel" parameterType="string">
		SELECT p.schedule_key ,u.name , p.userid,p.loc,
		TO_CHAR(p.startdate,'yyyy-mm-dd') AS startdate,TO_CHAR(p.enddate,'yyyy-mm-dd') AS enddate,p.hits 
		FROM Schedule p 
		JOIN userinfo u ON u.USERid = p.USERid
		WHERE p.schedule_key = #{schedule_key}
	</select>

</mapper>


