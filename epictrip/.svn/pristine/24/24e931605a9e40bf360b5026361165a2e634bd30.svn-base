insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('무로란', 42.3151792, 140.9737666, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('지큐미사키', 42.3027107, 141.0008274, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하코다테야마', 41.7445775, 140.7056028, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('고료카쿠', 41.7969245, 140.7567838, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('마츠마에', 41.5041304, 140.1734928, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('에사시', 41.84008, 140.1281, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오누마', 41.9987492, 140.6903742, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('고마가다케', 42.063333, 140.677222, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('쿠시로(습지)', 42.9849413, 144.381804, '일본','pl'||playsInfo_se.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아캉호수', 43.4572585, 144.1040147, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('미호로', 36.6714657, 127.4224247, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('토와다호수', 40.6186927, 141.146339, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오이라세계곡', 40.6864706, 139.9701849, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하치노헤(타네사시해안)', 19.2183307, 72.9780897, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('시모키타 반도', 41.4360723, 141.1024054, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('시모후로온천', 41.4669139, 141.0928587, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하치만타이', 40.0670801, 140.7827828, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하나마키온천', 32.2423335, 130.7260843, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('시도타이라온천', 39.4198519, 141.0231145, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('미야기자오', 38.7094478, 141.4925426, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아사히카와온천', 43.7708833, 142.3650083, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오니카와온천', 26.1201911, 127.7025012, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오타루 사와아카기 온천', 43.1902372, 140.994172, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오미카지리', 36.5128356, 140.6194923, '일본','pl'||playsInfo_seq.nextval);

insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오타루 쇼워스', 43.1902372, 140.994172, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('에코밸리 미야쿠', 37.5452683, 126.9224223, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오타루 아사리', 43.1751528, 141.0703878, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오기니마치', 33.1215572, 131.0681257, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('도쿄디즈니랜드', 35.6328964, 139.8803943, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('에노시마', 35.2990992, 139.4809269, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('후지산', 35.3606255, 138.7273634, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아타미 온천', 35.0963896, 139.071784, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('카와구치와 캔포우', 35.8077356, 139.7241874, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('요코하마 차이나타운', 35.4434459, 139.6460909, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('요코하마 모토마치', 35.4398189, 139.6499917, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('나가사키', 33.2488525, 129.6930912, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('호쿠라온천', 34.7355226, 135.2780417, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('나고야', 35.1814506, 136.9065571, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('쿠마모토산', 32.8594427, 130.7969149, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('쿠마모토 온천', 32.8032164, 130.7079369, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('벳부갓아래 온천', 33.2844614, 131.4907093, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('오이소', 35.311435, 139.313291, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('하코네유모토온천', 35.2333827, 139.1039163, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('아시노코호수', 35.2095674, 139.0034626, '일본','pl'||playsInfo_seq.nextval);
insert INTO playsInfo (plays, lat, lng, loc, playskey) VALUES ('센고쿠하라온천', 35.2607723, 139.0110305, '일본','pl'||playsInfo_seq.nextval);

SELECT * from plaInfo;










CREATE SEQUENCE Schedule_seq
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
SELECT * FROM schedule;
DELETE FROM SCHEDULE s WHERE skey = 'shl2';
INSERT INTO schedule values('shl_'||Schedule_seq.nextval,'heoyoun38',sysdate,'일본','2023-08-10','2023-08-14',0);
INSERT INTO schedule values('shl_'||Schedule_seq.nextval,'dudwo123',sysdate,'일본','2023-08-10','2023-08-14',0);




CREATE SEQUENCE Detail_seq
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;

drop TABLE Detail;
CREATE TABLE Detailschedule (
   	dskey   VARCHAR(255)   NOT NULL,
   	skey   VARCHAR(255)   NOT NULL,
   	placename VARCHAR(255)   NULL,
   	lat VARCHAR(255)   NULL,
   	lng VARCHAR(255)   NULL,
   	topnum  VARCHAR(255) null,
   	value   VARCHAR(255)   NULL,
   	dayInfo   Date   NULL
);


SELECT * FROM Schedule;

CREATE TABLE Detail_shl (
   	Dtlkey   VARCHAR(255)   NOT NULL,
   	skey   VARCHAR(255)   NOT NULL,
   	val VARCHAR(255),
   	dayDate  date   NULL,
   	placeInfo VARCHAR(255)
);
SELECT * FROM Detail_shl;

DROP TABLE detail_shl;
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'shl_3',null,'2023-08-10',null);
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'1','shl_3','2023-08-10','pl10');
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'2','shl_3','2023-08-11','pl14');
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'shl_4',null,'2023-08-10',null);
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'1','shl_4','2023-08-10','pl10');
INSERT INTO Detail_shl values('dtl_'||Detail_seq.nextval,'2','shl_4','2023-08-11','pl14');


SELECT d.*, LEVEL 
FROM Detail_shl d
START WITH val IS NULL
CONNECT BY PRIOR skey = val
ORDER BY dtlkey;

SELECT *
FROM (
	SELECT d.*, LEVEL 
	FROM Detail_shl d
	START WITH val IS NULL
	CONNECT BY PRIOR skey = val
	ORDER BY dtlkey
)
WHERE skey = 'shl_3' or val = 'shl_3';



INSERT INTO Detailschedule values('de'||Detail_seq.nextval, NULL ,'2023-08-10','sc1',null);
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl10','2023-08-10','1','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl14','2023-08-10','2','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl5','2023-08-10','3','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,NULL,'2023-08-11','sc1',null);
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl36','2023-08-11','1','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl34','2023-08-11','2','sc1');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl24','2023-08-11','3','sc1');

INSERT INTO Detailschedule values('de'||Detail_seq.nextval,NULL,'sc1','a1',NULL,'2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl10','sc1','1','a1','2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl36','sc1','2','a1','2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl34','sc1','3','a1','2023-08-11');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,NULL,'sc1','a1',NULL,'2023-08-12');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl10','sc1','1','a1','2023-08-12');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl36','sc1','2','a1','2023-08-12');
INSERT INTO Detailschedule values('de'||Detail_seq.nextval,'pl34','sc1','3','a1','2023-08-12');

SELECT LEVEL, d.*
FROM Detailschedule d
START WITH value IS NULL 
CONNECT BY PRIOR topnum = value;
ORDER BY dayInfo;

SELECT
    CONNECT_BY_ROOT dskey AS root_dskey,
    LPAD(' ', LEVEL - 1) || dskey AS indented_dskey,
    plaeckey,
    skey,
    topnum,
    value
FROM
    Detailschedule
CONNECT BY
    PRIOR dskey = plaeckey
START WITH
    plaeckey IS NULL;


SELECT * FROM Detailschedule;

CREATE TABLE plaecInfo (
	plaec VARCHAR(255),
	lat VARCHAR(255),
	lng VARCHAR(255),
	loc VARCHAR(255),
	plaeckey VARCHAR2(255)
);










CREATE SEQUENCE sp_seq
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;




SELECT * FROM placeInfo;


CREATE TABLE schedule_place (
	schedule_place_key VARCHAR(255),
	schedule_key VARCHAR(255),
	place_key VARCHAR(255),
	day_num number,
	FOREIGN KEY (place_key) REFERENCES placeInfo(PLACE_KEY),
    FOREIGN KEY (Schedule_KEY) REFERENCES schedulePost("Schedule_KEY")
);

ALTER TABLE placeInfo  ADD primary KEY (place_key);
ALTER TABLE SCHEDULEPOST ADD primary KEY ("Schedule_KEY");


INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl7',1);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl11',1);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl15',2);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl32',2);
INSERT INTO schedule_place values('sp_'||sp_seq.nextval,'shl_3','pl49',3);



   


SELECT * FROM userinfo;
SELECT * FROM Schedule ;
SELECT * FROM schedule_place;
SELECT * FROM place;

SELECT
    p.schedule_key,
    u.name,
    p.startdate,
    p.enddate,
    pp.day_num,
    pl.name AS place_name,
    pl.lat,
    pl.lng
FROM
    Schedule p
JOIN
    UserInfo u ON p.userid = u.userid
JOIN
    Schedule_Place pp ON p.schedule_key = pp.schedule_key
JOIN
    Place pl ON pp.place_key = pl.place_key
WHERE
    p.schedule_key = 'shl_3';



CREATE TABLE Schedule (
   schedule_key   VARCHAR(255)   NOT NULL,
   userid   VARCHAR(255)   NOT NULL,
   creatdate  date   NULL,
   loc   VARCHAR(255)   NULL,
   startdate  date   NULL,
   enddate  date   NULL,
   hits   number   NULL
);















